version: "1.0"

instrumentation:
  enabled: true
  logging: "on"

  instrument_patterns:
    - pattern: ".*"
      enabled: true

  ignore_patterns: []

  http_filtering:
    enabled: true
    ignore_routes:
      - pattern: "^/health$"

effect:
  auto_instrumentation:
    enabled: true
    granularity: fiber
    span_naming:
      default: "effect.{function}"
      infer_from_source: true
    performance:
      sampling_rate: 1.0

  operation_tracing:
    enabled: true
    operations:
      - name: all
        include_count: true
        include_stack: true
      - name: forEach
        include_count: true
        include_stack: true
      - name: fork
        include_count: false
        include_stack: true

  exporter_config:
    type: otlp
    # BUG TEST: This endpoint should be used but is being ignored
    # The library defaults to http://localhost:4318 instead
    endpoint: "http://localhost:9999"
    processor: simple
    headers:
      x-api-key: test_key_from_yaml
